<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Learning321 ‚Äì Greatest Scientists (Self-Hosted)</title>
<style>
  *{box-sizing:border-box}
  :root{--bg1:#6ec3ff;--bg2:#b3ffab;--bg3:#ffd3a5;--ink:#0b0b2b;--card:#ffffffee;--accent:#ff4d6d;--accent2:#845ef7;--accent3:#2ec4b6}
  html,body{height:100%}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--ink);overflow-x:hidden;background:#f7fbff}
  .parallax{position:fixed;inset:0;z-index:-3}
  .layer{position:absolute;inset:-10vh -10vw;background-repeat:repeat-x;background-size:cover}
  .sky{background:linear-gradient(180deg,#b9e8ff 0%,var(--bg1) 100%)}
  .clouds{opacity:.7}
  .clouds::before{content:"";position:absolute;inset:0;background:
    radial-gradient(circle at 10% 30%,#fff 0 12%,#fff0 13%),
    radial-gradient(circle at 35% 40%,#fff 0 10%,#fff0 11%),
    radial-gradient(circle at 60% 25%,#fff 0 14%,#fff0 15%),
    radial-gradient(circle at 80% 35%,#fff 0 10%,#fff0 11%),
    radial-gradient(circle at 20% 65%,#fff 0 11%,#fff0 12%),
    radial-gradient(circle at 55% 70%,#fff 0 16%,#fff0 17%);animation:drift 80s linear infinite}
  .far{background:linear-gradient(180deg,#ffe3c2 0,var(--bg3) 60%);clip-path:polygon(0 55%,12% 60%,25% 58%,40% 65%,55% 60%,70% 66%,85% 62%,100% 70%,100% 100%,0 100%);opacity:.8}
  .near{background:linear-gradient(180deg,#d0ffcf 0,var(--bg2) 60%);clip-path:polygon(0 65%,15% 70%,30% 68%,45% 75%,60% 70%,75% 78%,90% 73%,100% 80%,100% 100%,0 100%)}
  @keyframes drift{from{transform:translateX(0)}to{transform:translateX(-50%)}}
  .pSky{transform:translateY(calc(var(--scroll,0)*.1px))}
  .pClouds{transform:translateY(calc(var(--scroll,0)*.2px))}
  .pFar{transform:translateY(calc(var(--scroll,0)*.35px))}
  .pNear{transform:translateY(calc(var(--scroll,0)*.55px))}
  header{position:sticky;top:0;z-index:5;background:linear-gradient(90deg,#ffffffee,#fff8);backdrop-filter:blur(10px);border-bottom:1px solid #ffffff88}
  .wrap{max-width:1100px;margin:0 auto;padding:16px}
  .row{display:flex;flex-wrap:wrap;gap:12px;align-items:center}
  .logo{width:44px;height:44px;border-radius:50%;background:conic-gradient(from 0deg,#ff4d6d,#ffd166,#06d6a0,#118ab2,#845ef7,#ff4d6d);box-shadow:0 0 0 4px #fff;display:grid;place-items:center;color:#fff;font-weight:900}
  .panel{background:var(--card);border-radius:18px;box-shadow:0 10px 30px #0002;padding:18px;margin:16px 0}
  .btn{border:0;padding:10px 14px;border-radius:999px;font-weight:700;cursor:pointer;box-shadow:0 8px 20px #0001}
  .primary{background:linear-gradient(135deg,var(--accent),#ff8fab);color:#fff}
  .ghost{background:#fff;border:2px dashed #0002}
  .flat{background:#eef2ff}
  .good{background:linear-gradient(135deg,#06d6a0,#2ec4b6);color:#083d3d}
  .bad{background:linear-gradient(135deg,#ff7b00,#ff006e);color:#fff}
  .purple{background:linear-gradient(135deg,#9775fa,#845ef7);color:#fff}
  .fields{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px}
  .chip{padding:12px;border-radius:16px;background:#fff;border:2px solid #0001;display:flex;gap:8px;cursor:pointer}
  .card{display:grid;gap:12px;background:#fff;border:2px solid #0002;border-radius:16px;padding:16px}
  .options{display:grid;gap:8px}
  .option{display:flex;align-items:center;gap:10px;border:2px solid #0001;border-radius:14px;padding:10px;background:#f9f9ff;cursor:pointer}
  .result{display:flex;gap:16px;align-items:flex-start;flex-wrap:wrap}
  .avatar{width:200px;height:200px;border-radius:24px;background:#fff;border:3px solid #0002;display:grid;place-items:center;overflow:hidden}
  .avatar img{width:100%;height:100%;object-fit:cover}
  .contrib{font-size:18px;font-weight:600}
  .credit{font-size:12px;opacity:.75;margin-top:6px}
  footer{padding:60px 16px 100px;text-align:center;opacity:.9}
  .overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:#0006;z-index:10}
  .overlay.show{display:flex}
  .overlay .box{background:#fff;padding:20px;border-radius:16px;box-shadow:0 10px 30px #0005;max-width:480px}
  @media (max-width:600px){.avatar{width:150px;height:150px}}
</style>
</head>
<body>
  <div class="parallax" aria-hidden="true">
    <div class="layer sky pSky"></div>
    <div class="layer clouds pClouds"></div>
    <div class="layer far pFar"></div>
    <div class="layer near pNear"></div>
  </div>

  <header>
    <div class="wrap row">
      <div class="row" aria-label="Brand">
        <div class="logo">L321</div>
        <h1 style="margin:0">Learning321 ‚Äì Greatest Scientists</h1>
      </div>
      <div style="margin-left:auto" class="row">
        <button class="btn flat good" id="btnPause">‚è∏Ô∏è Pause</button>
        <button class="btn flat bad"  id="btnStop">‚èπÔ∏è Stop</button>
        <button class="btn flat purple" id="btnReset">üîÑ Reset</button>
      </div>
    </div>
  </header>

  <main>
    <section class="wrap">
      <div class="panel">
        <p><strong>Goal:</strong> Pick a field, answer three quick questions, then meet a scientist with a bright photo and one-line contribution. üî¨üß™üß†</p>
        <div class="row">
          <button class="btn primary" id="btnStart">Start ‚ñ∂Ô∏è</button>
          <button class="btn ghost" id="btnHow">How to Play ‚ùì</button>
          <button class="btn ghost" id="btnRetry" disabled>Retry Field ‚ôªÔ∏è</button>
        </div>
      </div>

      <div id="howto" class="panel" hidden>
        <h2>How it works</h2>
        <ol>
          <li>Choose a field (Physics, Chemistry, Maths, etc.).</li>
          <li>Answer three questions. Each question has 2‚Äì3 scientist options.</li>
          <li>On selection, see the scientist‚Äôs real image and key contribution.</li>
        </ol>
        <p style="opacity:.75;font-size:13px">Images are self-hosted from <code>https://rcsharma.github.io/Learning321/</code>. Make sure filenames match exactly (case-sensitive).</p>
      </div>

      <div id="fieldPicker" class="panel" hidden>
        <h2>Pick a Field</h2>
        <div class="fields" id="fields"></div>
      </div>

      <div id="qa" class="panel" hidden>
        <h2 id="qaTitle">Questions</h2>
        <div id="questionArea"></div>
      </div>

      <div id="result" class="panel" hidden>
        <h2>Meet your Scientist üéâ</h2>
        <div class="result">
          <div class="avatar" id="avatar" aria-label="Scientist photo"></div>
          <div>
            <div style="font-size:24px;font-weight:800" id="personName">Name</div>
            <div class="contrib" id="personContrib">Contribution sentence appears here.</div>
            <div class="credit" id="personCredit"></div>
            <div style="margin-top:10px" class="row">
              <button class="btn primary" id="btnNextQ">Next Question ‚û°Ô∏è</button>
              <button class="btn ghost" id="btnRetry2">Retry Field ‚ôªÔ∏è</button>
            </div>
          </div>
        </div>
      </div>

      <footer><small>Made with curiosity and color. Sounds are synthesized on your device. üéµ</small></footer>
    </section>
  </main>

  <div class="overlay" id="pauseOverlay" role="dialog" aria-modal="true" aria-label="Paused">
    <div class="box">
      <h3>Game Paused</h3>
      <p>Take a breath. When you‚Äôre ready, continue the journey! üåø</p>
      <div class="row">
        <button class="btn good" id="btnResume">‚ñ∂Ô∏è Resume</button>
        <button class="btn bad"  id="btnOverlayStop">‚èπÔ∏è Stop</button>
      </div>
    </div>
  </div>

<script>
/* ---------- helpers, parallax, sounds ---------- */
const $ = sel => document.querySelector(sel);
function updateParallax(){document.body.style.setProperty('--scroll', window.scrollY||0);}
addEventListener('scroll', updateParallax, {passive:true}); updateParallax();

let audioCtx=null, masterGain=null, soundEnabled=true;
function ensureAudio(){ if(audioCtx) return; audioCtx=new (window.AudioContext||window.webkitAudioContext)(); masterGain=audioCtx.createGain(); masterGain.gain.value=.2; masterGain.connect(audioCtx.destination); }
function beep(type='sine',f=440,d=.15,a=.005,r=.05){ if(!soundEnabled) return; ensureAudio(); const o=audioCtx.createOscillator(), g=audioCtx.createGain(); o.type=type; o.frequency.value=f; o.connect(g); g.connect(masterGain); const t=audioCtx.currentTime; g.gain.setValueAtTime(0,t); g.gain.linearRampToValueAtTime(1,t+a); g.gain.exponentialRampToValueAtTime(.001,t+a+d+r); o.start(t); o.stop(t+a+d+r+.02); }
function chord(){ [523,659,784].forEach((f,i)=>setTimeout(()=>beep('triangle',f,.18),i*40)); }

/* ---------- DATA (uses your filenames in repo root) ---------- */
const BASE = "https://rcsharma.github.io/Learning321/";
const DB = {
  Physics: [
    {name:'Albert Einstein', img: BASE+'einstein.jpg', contrib:'Explained space, time, and energy with relativity.', credit:'PD'},
    {name:'Marie Curie',     img: BASE+'curie.jpg',    contrib:'Pioneered research on radioactivity; 2√ó Nobel.',    credit:'PD'},
    {name:'Isaac Newton',    img: BASE+'newton.jpg',   contrib:'Laws of motion and universal gravitation.',         credit:'PD'},
  ],
  Chemistry: [
    {name:'Dmitri Mendeleev', img: BASE+'mendeleev.jpg',   contrib:'Created the periodic table organizing elements.', credit:'PD'},
    {name:'Alexander Fleming',img: BASE+'fleming.jpg',     contrib:'Discovered penicillin, first antibiotic.',        credit:'PD'},
    {name:'Tu Youyou',        img: BASE+'youyou.jpg',      contrib:'Discovered artemisinin for malaria.',            credit:'CC'},
  ],
  Mathematics: [
    {name:'Carl Friedrich Gauss', img: BASE+'gauss.jpg',   contrib:'Laid foundations in number theory & statistics.', credit:'PD'},
    {name:'Ada Lovelace',         img: BASE+'lovelace.jpg',contrib:'Early algorithm concept for a machine.',          credit:'PD'},
    {name:'Galileo Galilei',      img: BASE+'galilei.jpg', contrib:'Applied math & physics to astronomy.',            credit:'PD'},
  ],
  Biology: [
    {name:'Charles Darwin',  img: BASE+'darwin.jpg',    contrib:'Proposed evolution by natural selection.',         credit:'PD'},
    {name:'Jane Goodall',    img: BASE+'goodall.jpg',   contrib:'Transformed knowledge of chimpanzee behavior.',    credit:'CC'},
    {name:'Joseph Banks',    img: BASE+'banks.jpg',     contrib:'Cataloged plants on global voyages.',              credit:'PD'},
  ],
  Botany: [
    {name:'George W. Carver',img: BASE+'carver.jpg',    contrib:'Innovated crop rotations & plant products.',       credit:'PD'},
    {name:'Alexander von Humboldt', img: BASE+'humboldt.jpg', contrib:'Linked climate, plants & geography.',       credit:'PD'},
    {name:'Eratosthenes',    img: BASE+'eratosthenes.jpg', contrib:'Measured Earth‚Äôs circumference.',              credit:'PD'},
  ],
  Zoology: [
    {name:'Grace Hopper (CS)', img: BASE+'hopper.jpg',  contrib:'Compiler pioneer; popularized ‚Äúdebugging‚Äù.',       credit:'PD'},
    {name:'Nikola Tesla (Eng.)', img: BASE+'tesla.jpg', contrib:'Advanced AC power & wireless ideas.',              credit:'PD'},
    {name:'Tim Berners-Lee (CS)', img: BASE+'berners-lee.jpg', contrib:'Invented the World Wide Web.',             credit:'CC'},
  ],
  Engineering: [
    {name:'Nikola Tesla',    img: BASE+'tesla.jpg',     contrib:'AC power systems & wireless concepts.',            credit:'PD'},
    {name:'Hedy Lamarr',     img: BASE+'lamarr.jpg',    contrib:'Co-invented spread-spectrum (Wi-Fi roots).',       credit:'PD'},
    {name:'I. K. Brunel',    img: BASE+'brunel.jpg',    contrib:'Revolutionary bridges & railways.',                credit:'PD'},
  ],
  Medicine: [
    {name:'Edward Jenner',   img: BASE+'jenner.jpg',    contrib:'Developed the first successful vaccine.',          credit:'PD'},
    {name:'Tu Youyou',       img: BASE+'youyou.jpg',    contrib:'Artemisinin for malaria treatment.',               credit:'CC'},
    {name:'Alexander Fleming',img: BASE+'fleming.jpg',  contrib:'Discovered penicillin.',                           credit:'PD'},
  ],
  Geography: [
    {name:'Alexander von Humboldt', img: BASE+'humboldt.jpg', contrib:'Mapped nature‚Äôs patterns across continents.', credit:'PD'},
    {name:'Eratosthenes',    img: BASE+'eratosthenes.jpg', contrib:'Calculated Earth‚Äôs circumference.',              credit:'PD'},
    {name:'Galileo Galilei', img: BASE+'galilei.jpg',   contrib:'Laid groundwork for modern observational science.', credit:'PD'},
  ],
  "Computer Science": [
    {name:'Grace Hopper',    img: BASE+'hopper.jpg',    contrib:'COBOL & compiler pioneer; ‚Äúdebugging‚Äù.',           credit:'PD'},
    {name:'Tim Berners-Lee', img: BASE+'berners-lee.jpg', contrib:'Invented the World Wide Web.',                  credit:'CC'},
    {name:'Albert Einstein (math/phys)', img: BASE+'einstein.jpg', contrib:'Relativity influenced computing era.',  credit:'PD'},
  ],
  Genetics: [
    {name:'Watson & Crick',  img: BASE+'watson-crick.jpg', contrib:'Modeled DNA double helix.',                     credit:'PD'},
    {name:'Marie Curie (chem/phys)', img: BASE+'curie.jpg', contrib:'Radioactivity research enabled modern bio-med.', credit:'PD'},
    {name:'Carl Friedrich Gauss (math)', img: BASE+'gauss.jpg', contrib:'Math foundations used across sciences.',   credit:'PD'},
  ],
};

const FIELD_EMOJI = { Physics:'üß≤', Chemistry:'‚öóÔ∏è', Mathematics:'‚ûó', Biology:'üß´', Botany:'üåø', Zoology:'üêæ', Astronomy:'üåå', 'Computer Science':'üíª', Engineering:'üõ†Ô∏è', Medicine:'ü©∫', Geography:'üß≠', Genetics:'üß¨' };

let state = { screen:'idle', field:null, qIndex:0, picks:[] };

/* ---------- UI references ---------- */
const howto = $('#howto'), fieldPicker=$('#fieldPicker'), fieldsEl=$('#fields'),
      qa=$('#qa'), qaTitle=$('#qaTitle'), questionArea=$('#questionArea'),
      result=$('#result'), personName=$('#personName'), personContrib=$('#personContrib'),
      personCredit=$('#personCredit'), avatar=$('#avatar'),
      pauseOverlay=$('#pauseOverlay');

function show(el){el.hidden=false} function hide(el){el.hidden=true}

/* ---------- flows ---------- */
function toIdle(){ state={screen:'idle',field:null,qIndex:0,picks:[]}; hide(howto); hide(fieldPicker); hide(qa); hide(result); $('#btnRetry').disabled=true; $('#btnRetry2')?.setAttribute('disabled',''); }
function toField(){ state.screen='field'; hide(qa); hide(result); show(fieldPicker); $('#btnRetry').disabled=true; renderFields(); sendHeight(); }
function renderFields(){ fieldsEl.innerHTML=''; Object.keys(DB).forEach(field=>{ const b=document.createElement('button'); b.className='chip'; b.innerHTML=`<span>${FIELD_EMOJI[field]||'üî¨'}</span><strong>${field}</strong>`; b.onclick=()=>selectField(field); fieldsEl.appendChild(b); }); }
function selectField(field){ state.field=field; state.qIndex=0; state.picks=[]; beep('square',660,.12); $('#btnRetry').disabled=false; hide(fieldPicker); toQuestion(); sendHeight(); }
function toQuestion(){
  state.screen='q'; hide(result); show(qa);
  const field=state.field, trio=DB[field]; const qs=[
    `There are famous people who worked on ${field}. Who would you like to meet?`,
    `Whose work in ${field} feels most impactful to you today?`,
    `Whose story in ${field} are you most curious to hear?`
  ];
  qaTitle.textContent=`Field: ${field} ‚Äî Question ${state.qIndex+1} of 3`;
  const card=document.createElement('div'); card.className='card';
  card.innerHTML=`<div style="font-weight:700">${qs[state.qIndex]}</div>`;
  const opts=document.createElement('div'); opts.className='options';
  trio.forEach((p,idx)=>{
    const label=document.createElement('label'); label.className='option';
    label.innerHTML=`<input type="radio" name="q${state.qIndex}"> <span>${p.name}</span>`;
    label.querySelector('input').addEventListener('change',()=>{
      showPerson(p); state.picks[state.qIndex]=p.name; beep('sine',520+idx*60,.12); chord();
    }, {once:true});
    opts.appendChild(label);
  });
  card.appendChild(opts); questionArea.innerHTML=''; questionArea.appendChild(card); sendHeight();
}
function showPerson(p){
  state.screen='result'; show(result); hide(qa);
  personName.textContent=p.name; personContrib.textContent=p.contrib; personCredit.textContent=p.credit||'';
  avatar.innerHTML='';
  const img=new Image(); img.alt=p.name; img.loading='lazy'; img.src=p.img;
  img.onerror=()=>{ avatar.innerHTML='<div style="padding:12px;text-align:center">Image unavailable.<br/>Try another option ‚û°Ô∏è</div>'; sendHeight(); };
  img.onload=sendHeight; avatar.appendChild(img); sendHeight();
}
function nextQuestion(){ if(state.qIndex<2){state.qIndex++; toQuestion();} else {beep('triangle',880,.2); chord(); qaTitle.textContent=`Nice! You explored ${state.field}.`; show(fieldPicker); sendHeight();} }

/* ---------- controls ---------- */
$('#btnStart').onclick = ()=>{ ensureAudio(); toField(); chord(); };
$('#btnHow').onclick   = ()=>{ howto.hidden=!howto.hidden; beep('sine', howto.hidden?380:520,.08); sendHeight(); };
$('#btnRetry').onclick = ()=>{ toField(); beep('square',740,.12); };
$('#btnRetry2')?.addEventListener('click', ()=>{ toField(); beep('square',740,.12); });
$('#btnNextQ').onclick = ()=> nextQuestion();
$('#btnPause').onclick = ()=>{ (state.screen==='paused')?doResume():doPause(); };
$('#btnStop').onclick  = ()=> doStop();
$('#btnReset').onclick = ()=> doReset();
$('#btnResume').onclick= ()=> doResume();
$('#btnOverlayStop').onclick= ()=> doStop();
addEventListener('keydown', e=>{ if(e.key.toLowerCase()==='p') doPause(); if(e.key.toLowerCase()==='n') nextQuestion(); });

function doPause(){ if(state.screen==='paused') return; ensureAudio(); audioCtx.suspend(); soundEnabled=false; pauseOverlay.classList.add('show'); state.prevScreen=state.screen; state.screen='paused'; $('#btnPause').setAttribute('aria-pressed','true'); sendHeight(); }
function doResume(){ if(!audioCtx) return; audioCtx.resume(); soundEnabled=true; pauseOverlay.classList.remove('show'); state.screen=state.prevScreen||'idle'; $('#btnPause').setAttribute('aria-pressed','false'); beep('sine',660,.08); sendHeight(); }
function doStop(){ pauseOverlay.classList.remove('show'); toIdle(); beep('sawtooth',220,.1); sendHeight(); }
function doReset(){ toIdle(); beep('triangle',440,.12); sendHeight(); }

/* ---------- Blogger auto-height (postMessage) ---------- */
function sendHeight(){
  const h=Math.max(document.body.scrollHeight, document.documentElement.scrollHeight);
  try{ parent.postMessage({type:'L321_HEIGHT',height:h},'*'); }catch(e){}
}
addEventListener('load',sendHeight); addEventListener('resize',sendHeight); new ResizeObserver(sendHeight).observe(document.body);

/* init */
toIdle();
</script>
</body>
</html>
